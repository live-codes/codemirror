var CodemirrorTsWorker=(()=>{var f=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var E=(e,t)=>{for(var r in t)f(e,r,{get:t[r],enumerable:!0})},P=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of C(t))!F.call(e,o)&&o!==r&&f(e,o,{get:()=>t[o],enumerable:!(n=U(t,o))||n.enumerable});return e};var M=e=>P(f({},"__esModule",{value:!0}),e);var v={};E(v,{createWorker:()=>D});function g({env:e,path:t,pos:r}){let n=r;if(n===null)return null;let o=e.languageService.getQuickInfoAtPosition(t,n);if(!o)return null;let s=o.textSpan.start,i=e.languageService.getTypeDefinitionAtPosition(t,n)??e.languageService.getDefinitionAtPosition(t,n);return{start:s,end:s+o.textSpan.length,typeDef:i,quickInfo:o}}var p=["Object","Function","Array","Number","parseFloat","parseInt","Infinity","NaN","undefined","Boolean","String","Symbol","Date","Promise","RegExp","Error","JSON","Math","Intl","ArrayBuffer","Atomics","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array","Uint8ClampedArray","BigUint64Array","BigInt64Array","DataView","Map","BigInt","Set","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape","isFinite","isNaN","Deno","Blob","FormData","Request","Response","TextDecoder","TextEncoder","URL","URLPattern","URLSearchParams","atob","btoa","crypto","fetch","clearInterval","clearTimeout","performance","setInterval","setTimeout"];var x=new Set(["class","constant","enum","function","interface","keyword","method","namespace","property","text","type","variable"]);function S(e,t){let{source:r}=e,n=t&&r[0]!="^",o=r[r.length-1]!="$";return!n&&!o?e:new RegExp(`${n?"^":""}(?:${r})${o?"$":""}`,e.flags??(e.ignoreCase?"i":""))}function y(e,t){let r=e.lastIndexOf(`
`,t-1)+1,n=e.indexOf(`
`,t);n===-1&&(n=e.length);let o=e.slice(r,n);return{from:r,to:n,text:o}}function m(e,t,r){let n=y(e,t),o=Math.max(n.from,t-250),s=n.text.slice(o-n.from,t-n.from),i=s.search(S(r,!1));return i<0?null:{from:o+i,to:t,text:s.slice(i)}}var b=["warning"];async function A({env:e,path:t,context:r,keepLegacyLimitationForAutocompletionSymbols:n=!0}){let{pos:o,explicit:s}=r,i=e.getSourceFile(t)?.getFullText();if(!i)return null;let a=m(i,o,/\w*/);if(a?.text||(a=m(i,o,/\./)),!a?.text&&!s)return null;let l=e.languageService.getCompletionsAtPosition(t,o,{},{});if(!l)return null;let L=l.entries.filter(c=>!b.includes(c.kind)&&(c.sortText<"15"||l.optionalReplacementSpan?.length&&(!n||p.includes(c.name)))).map(c=>{let R=-Number(c.sortText)||0,u=c.kind?String(c.kind):void 0;return u==="member"&&(u="property"),u&&!x.has(u)&&(u=void 0),{label:c.name,type:u,boost:R}});return{from:a?a.text==="."?a.to:a.from:o,options:L}}function h(e){if(e.code===7027)return"warning";switch(e.category){case 1:return"error";case 3:return"info";case 0:return"warning";case 2:return"info"}}function d(e){return!!(e.file&&typeof e.start=="number"&&typeof e.length=="number")}function w(e){return typeof e.messageText=="string"?e.messageText:e.messageText.messageText}function T(e){let t=e.start,r=w(e);return{from:t,to:t+e.length,message:r,severity:h(e)}}function I({env:e,path:t,diagnosticCodesToIgnore:r}){if(!e.getSourceFile(t))return[];let o=e.languageService.getSyntacticDiagnostics(t),s=e.languageService.getSemanticDiagnostics(t);return[...o,...s].filter(a=>d(a)&&!r.includes(a.code)).map(T)}function O(e,t,r){e.getSourceFile(t)?e.updateFile(t,r):e.createFile(t,r)}function D(e){let t;return{async initialize(){t=await e()},updateFile({path:r,code:n}){t&&O(t,r,n)},getLints({path:r,diagnosticCodesToIgnore:n}){return t?I({env:t,path:r,diagnosticCodesToIgnore:n}):[]},getAutocompletion({path:r,context:n}){return t?A({env:t,path:r,context:n}):null},getHover({path:r,pos:n}){if(t)return g({env:t,path:r,pos:n})},getEnv(){return t}}}return M(v);})();
