var CodemirrorTsWorker=(()=>{var l=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var F=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},E=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of U(e))!C.call(t,o)&&o!==n&&l(t,o,{get:()=>e[o],enumerable:!(r=R(e,o))||r.enumerable});return t};var P=t=>E(l({},"__esModule",{value:!0}),t);var w={};F(w,{createWorker:()=>O});function m({env:t,path:e,pos:n}){let r=n;if(r===null)return null;let o=t.languageService.getQuickInfoAtPosition(e,r);if(!o)return null;let a=o.textSpan.start,i=t.languageService.getTypeDefinitionAtPosition(e,r)??t.languageService.getDefinitionAtPosition(e,r);return{start:a,end:a+o.textSpan.length,typeDef:i,quickInfo:o}}var g=["Object","Function","Array","Number","parseFloat","parseInt","Infinity","NaN","undefined","Boolean","String","Symbol","Date","Promise","RegExp","Error","JSON","Math","Intl","ArrayBuffer","Atomics","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array","Uint8ClampedArray","BigUint64Array","BigInt64Array","DataView","Map","BigInt","Set","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape","isFinite","isNaN","Deno","Blob","FormData","Request","Response","TextDecoder","TextEncoder","URL","URLPattern","URLSearchParams","atob","btoa","crypto","fetch","clearInterval","clearTimeout","performance","setInterval","setTimeout"];var p=new Set(["class","constant","enum","function","interface","keyword","method","namespace","property","text","type","variable"]);function x(t,e){let{source:n}=t,r=e&&n[0]!="^",o=n[n.length-1]!="$";return!r&&!o?t:new RegExp(`${r?"^":""}(?:${n})${o?"$":""}`,t.flags??(t.ignoreCase?"i":""))}function S(t,e){let n=t.lastIndexOf(`
`,e-1)+1,r=t.indexOf(`
`,e);r===-1&&(r=t.length);let o=t.slice(n,r);return{from:n,to:r,text:o}}function f(t,e,n){let r=S(t,e),o=Math.max(r.from,e-250),a=r.text.slice(o-r.from,e-r.from),i=a.search(x(n,!1));return i<0?null:{from:o+i,to:e,text:a.slice(i)}}var M=["warning"];async function y({env:t,path:e,context:n}){let{pos:r,explicit:o}=n,a=t.getSourceFile(e)?.getFullText();if(!a)return null;let i=f(a,r,/\w*/);if(i?.text||(i=f(a,r,/\./)),!i?.text&&!o)return null;let u=t.languageService.getCompletionsAtPosition(e,r,{},{});if(!u)return null;let D=u.entries.filter(s=>!M.includes(s.kind)&&(s.sortText<"15"||u.optionalReplacementSpan?.length&&g.includes(s.name))).map(s=>{let L=-Number(s.sortText)||0,c=s.kind?String(s.kind):void 0;return c==="member"&&(c="property"),c&&!p.has(c)&&(c=void 0),{label:s.name,type:c,boost:L}});return{from:i?i.text==="."?i.to:i.from:r,options:D}}function b(t){if(t.code===7027)return"warning";switch(t.category){case 1:return"error";case 3:return"info";case 0:return"warning";case 2:return"info"}}function A(t){return!!(t.file&&typeof t.start=="number"&&typeof t.length=="number")}function h(t){return typeof t.messageText=="string"?t.messageText:t.messageText.messageText}function T(t){let e=t.start,n=h(t);return{from:e,to:e+t.length,message:n,severity:b(t)}}function d({env:t,path:e}){if(!t.getSourceFile(e))return[];let r=t.languageService.getSyntacticDiagnostics(e),o=t.languageService.getSemanticDiagnostics(e);return[...r,...o].filter(A).map(T)}function I(t,e,n){t.getSourceFile(e)?t.updateFile(e,n):t.createFile(e,n)}function O(t){let e;return{async initialize(){e=await t()},updateFile({path:n,code:r}){e&&I(e,n,r)},getLints({path:n}){return e?d({env:e,path:n}):[]},getAutocompletion({path:n,context:r}){return e?y({env:e,path:n,context:r}):null},getHover({path:n,pos:r}){if(e)return m({env:e,path:n,pos:r})},getEnv(){return e}}}return P(w);})();
